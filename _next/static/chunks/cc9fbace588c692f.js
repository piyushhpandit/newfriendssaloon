(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90153,88840,e=>{"use strict";e.i(47167);let t="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean)[0]??"";function r(){return{url:"https://atdvzctfwjglsxctqwcy.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF0ZHZ6Y3Rmd2pnbHN4Y3Rxd2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMTMzMDIsImV4cCI6MjA4MzU4OTMwMn0.K86GVTs3LH1NfaJMhxc3-9rnmlPCyoM8LWCpwgbJ8H8"}}e.s(["BARBER_EMAIL",0,t,"tryGetSupabaseEnv",()=>r],90153);var a=e.i(43476),i=e.i(932),n=e.i(71645),l=e.i(45060);function s(e){let t,r,s,o,c,d,m,u,b,h,p,g,x,f=(0,i.c)(32),{message:y,variant:v,onClose:j,autoHideMs:N,className:w}=e,S=void 0===v?"error":v,I=void 0===N?0:N,C=!!y;return(f[0]!==I||f[1]!==j||f[2]!==C?(t=()=>{if(!C||!j||!I)return;let e=window.setTimeout(j,I);return()=>window.clearTimeout(e)},r=[C,j,I],f[0]=I,f[1]=j,f[2]=C,f[3]=t,f[4]=r):(t=f[3],r=f[4]),(0,n.useEffect)(t,r),C)?(f[5]!==w||f[6]!==S?(m="success"===S?{border:"border-emerald-200",bg:"bg-emerald-50",text:"text-emerald-800",title:"Success"}:"warning"===S?{border:"border-[rgb(var(--warning))]/30",bg:"bg-[rgb(var(--warning-bg))]",text:"text-[rgb(var(--warning))]",title:"Notice"}:{border:"border-[rgb(var(--danger))]/30",bg:"bg-[rgb(var(--danger-bg))]",text:"text-[rgb(var(--danger))]",title:"Error"},f[12]!==w?(o=(0,l.cn)("pointer-events-none fixed inset-x-0 top-1/2 z-50 flex -translate-y-1/2 justify-center px-4",w),f[12]=w,f[13]=o):o=f[13],c="status",d="polite",s=(0,l.cn)("pointer-events-auto w-full max-w-md rounded-2xl border p-4 shadow-lg",m.border,m.bg,m.text),f[5]=w,f[6]=S,f[7]=s,f[8]=o,f[9]=c,f[10]=d,f[11]=m):(s=f[7],o=f[8],c=f[9],d=f[10],m=f[11]),f[14]!==m.title?(u=(0,a.jsx)("div",{className:"font-semibold",children:m.title}),f[14]=m.title,f[15]=u):u=f[15],f[16]!==j?(b=j?(0,a.jsx)("button",{type:"button",className:"rounded-lg px-2 py-1 text-sm font-semibold opacity-80 hover:opacity-100",onClick:j,"aria-label":"Dismiss message",children:"Close"}):null,f[16]=j,f[17]=b):b=f[17],f[18]!==u||f[19]!==b?(h=(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[u,b]}),f[18]=u,f[19]=b,f[20]=h):h=f[20],f[21]!==y?(p=(0,a.jsx)("div",{className:"mt-1 whitespace-pre-wrap text-sm",children:y}),f[21]=y,f[22]=p):p=f[22],f[23]!==h||f[24]!==p||f[25]!==s?(g=(0,a.jsxs)("div",{className:s,role:"alert",children:[h,p]}),f[23]=h,f[24]=p,f[25]=s,f[26]=g):g=f[26],f[27]!==g||f[28]!==o||f[29]!==c||f[30]!==d?(x=(0,a.jsx)("div",{className:o,role:c,"aria-live":d,children:g}),f[27]=g,f[28]=o,f[29]=c,f[30]=d,f[31]=x):x=f[31],x):null}e.s(["Toast",()=>s],88840)},55064,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(71645),i=e.i(90153),n=e.i(69212),l=e.i(88840),s=e.i(18566);function o(){let e,o,b,h,p,g,x,f,y,v,j,N,w,S=(0,r.c)(31);(0,s.useRouter)();let[I,C]=(0,a.useState)(i.BARBER_EMAIL),[k,M]=(0,a.useState)(!1),[T,E]=(0,a.useState)(""),[_,J]=(0,a.useState)(null),[O,L]=(0,a.useState)(!1);S[0]!==I?(e=async function(){J(null),L(!0);let e=I.trim();if(!e){J("Enter your email."),L(!1);return}let t=await fetch("/api/barber/send-otp",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e})}).catch(u);if(!t){J("Network error. Please try again."),L(!1);return}let r=await t.json().catch(m);if(!t.ok||!r?.ok){J(r?.error||"Failed to send code."),L(!1);return}M(!0),L(!1)},S[0]=I,S[1]=e):e=S[1];let R=e;S[2]!==T||S[3]!==I?(o=async function(){J(null),L(!0);let e=I.trim(),t=T.trim().replace(/\D/g,"").slice(0,4);if(!e){J("Enter your email."),L(!1);return}if(4!==t.length){J("Enter the 4-digit code from your email."),L(!1);return}let r=await fetch("/api/barber/verify-otp",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e,code:t})}).catch(d);if(!r){J("Network error. Please try again."),L(!1);return}let a=await r.json().catch(c);if(!r.ok||!a?.ok||!a?.actionLink){J(a?.error||"Failed to verify code."),L(!1);return}L(!1),window.location.href=a.actionLink},S[2]=T,S[3]=I,S[4]=o):o=S[4];let B=o;S[5]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsxs)("header",{className:"card",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-[rgb(var(--muted))]",children:"Barber access"}),(0,t.jsx)("h1",{className:"mt-1 text-2xl font-semibold tracking-tight",children:n.SHOP.name})]}),S[5]=b):b=S[5],S[6]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("h2",{className:"text-base font-semibold",children:"Login (email code)"}),S[6]=h):h=S[6],S[7]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("div",{className:"label",children:"Email"}),S[7]=p):p=S[7],S[8]===Symbol.for("react.memo_cache_sentinel")?(g=e=>C(e.target.value),S[8]=g):g=S[8],S[9]!==I?(x=(0,t.jsxs)("label",{className:"block",children:[p,(0,t.jsx)("input",{className:"input mt-1",value:I,onChange:g,inputMode:"email",placeholder:"you@domain.com"})]}),S[9]=I,S[10]=x):x=S[10],S[11]!==T||S[12]!==k?(f=k?(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("div",{className:"label",children:"Code"}),(0,t.jsx)("input",{className:"input mt-1",value:T,onChange:e=>E(e.target.value.replace(/\D/g,"").slice(0,4)),inputMode:"numeric",placeholder:"4-digit code",maxLength:4})]}):null,S[11]=T,S[12]=k,S[13]=f):f=S[13],S[14]===Symbol.for("react.memo_cache_sentinel")?(y=()=>J(null),S[14]=y):y=S[14],S[15]!==_?(v=(0,t.jsx)(l.Toast,{message:_,onClose:y}),S[15]=_,S[16]=v):v=S[16];let P=O?"Sending…":"Send code";return S[17]!==O||S[18]!==R||S[19]!==P?(j=(0,t.jsx)("button",{type:"button",onClick:R,disabled:O,className:"btn-primary",children:P}),S[17]=O,S[18]=R,S[19]=P,S[20]=j):j=S[20],S[21]!==O||S[22]!==k||S[23]!==B?(N=k?(0,t.jsx)("button",{type:"button",onClick:B,disabled:O,className:"btn-primary",children:O?"Verifying…":"Verify code"}):null,S[21]=O,S[22]=k,S[23]=B,S[24]=N):N=S[24],S[25]!==j||S[26]!==N||S[27]!==x||S[28]!==f||S[29]!==v?(w=(0,t.jsx)("div",{className:"min-h-screen px-4 py-5",children:(0,t.jsxs)("div",{className:"mx-auto w-full max-w-lg",children:[b,(0,t.jsxs)("section",{className:"card mt-4",children:[h,(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[x,f,v,j,N]})]})]})}),S[25]=j,S[26]=N,S[27]=x,S[28]=f,S[29]=v,S[30]=w):w=S[30],w}function c(){return null}function d(){return null}function m(){return null}function u(){return null}e.s(["default",()=>o])}]);